# UAT Instructions: ONEK-201

**Issue**: [ONEK-201] RFQ quote cards missing outbound/return leg badge
**Date Generated**: 2026-02-08
**Branch**: `kinglerbercy/onek-201-bug-rfq-quote-cards-missing-outboundreturn-leg-badge` (commit `7f91992`)
**Status**: Done
**Priority**: Medium
**Author**: Generated by Claude Code `/uat_instructions`

---

## Overview

This bug fix adds visual outbound/return leg badges to RFQ flight cards (`components/avinode/rfq-flight-card.tsx`). Previously, the component had access to `flight.legType` ('outbound' | 'return') and `flight.legSequence` (1 | 2) but never rendered them -- the data was logged to console but not displayed. Users had to scroll to section headers ("Return Flight Options") to identify which leg a quote belonged to. After the fix, each card displays a small colored badge (green "Outbound" / blue "Return") near the aircraft information, and badges are only shown for round-trip or multi-leg requests.

---

## Acceptance Criteria

### AC-1: Outbound Leg Badge Displays on Outbound Quote Cards

**Given** a round-trip flight request with RFQ quote cards in the chat
**When** the user views quote cards in the "Outbound Flight Options" section
**Then** each card displays a green "Outbound" badge near the aircraft name or card header

### AC-2: Return Leg Badge Displays on Return Quote Cards

**Given** a round-trip flight request with RFQ quote cards in the chat
**When** the user views quote cards in the "Return Flight Options" section
**Then** each card displays a blue "Return" badge near the aircraft name or card header

### AC-3: Single-Leg Requests Do Not Display Leg Badges

**Given** a one-way (single-leg) flight request with RFQ quote cards
**When** the user views the quote cards
**Then** no "Outbound" or "Return" badge is displayed on any card (badges are hidden for single-leg requests)

### AC-4: Badge Styling Is Consistent and Readable

**Given** any quote card displaying a leg badge
**When** the user views the badge at various viewport sizes (desktop and mobile)
**Then** the badge text is readable, the color contrast is sufficient, the badge does not overlap other card content, and it renders consistently across cards

---

## Test Steps

### Test 1: Outbound Badge on Outbound Cards (Maps to AC-1)

1. Open the application at `http://localhost:3001`
2. Navigate to the CJTQML chat session (round-trip KTEB to KVNY)
3. Scroll to the section where outbound flight quotes are displayed
4. Expand or view any outbound quote card
5. Look for a badge near the aircraft name or card header area
   - **Expected**: A green "Outbound" badge is visible on the card
6. Check 2-3 additional outbound cards
   - **Expected**: All outbound cards consistently display the green "Outbound" badge

**Result**: [ ] Pass  [ ] Fail

**Notes**: _______________

---

### Test 2: Return Badge on Return Cards (Maps to AC-2)

1. In the same CJTQML session, scroll to the "Return Flight Options" section
2. Expand or view any return quote card
3. Look for a badge near the aircraft name or card header area
   - **Expected**: A blue "Return" badge is visible on the card
4. Check 2-3 additional return cards
   - **Expected**: All return cards consistently display the blue "Return" badge
5. Verify the "Return" badge is visually distinct from the "Outbound" badge
   - **Expected**: Different color (blue vs. green) makes them immediately distinguishable

**Result**: [ ] Pass  [ ] Fail

**Notes**: _______________

---

### Test 3: No Badges on One-Way Requests (Maps to AC-3)

1. Navigate to or create a one-way flight request session
2. Wait for RFQ quote cards to appear
3. Inspect each quote card
   - **Expected**: No "Outbound" or "Return" badge is displayed on any card
4. Verify the card layout is not disrupted by the badge's absence
   - **Expected**: Cards render cleanly without extra whitespace where badges would be

**Result**: [ ] Pass  [ ] Fail

**Notes**: _______________

---

### Test 4: Badge Visual Quality (Maps to AC-4)

1. Open the CJTQML session with visible leg badges
2. View the badges at desktop viewport (1280px+)
   - **Expected**: Badges are readable, well-positioned, and do not overlap aircraft name or price
3. Resize the browser to tablet width (768px)
   - **Expected**: Badges remain visible and properly positioned
4. Resize to mobile width (390px)
   - **Expected**: Badges are still readable and do not cause horizontal scrolling or layout overflow
5. Check color contrast of badge text against badge background
   - **Expected**: Text is easily readable (sufficient contrast ratio)

**Result**: [ ] Pass  [ ] Fail

**Notes**: _______________

---

## Test Data & Environment

### Environment Requirements

- **URL**: `http://localhost:3001` (development) or staging URL
- **Branch**: `main` (commit `7f91992` merged)
- **Setup**: `npm install && npm run dev`

### Test Data

- **Round-trip session with quotes**: CJTQML (KTEB to KVNY, should have both outbound and return quote cards)
- **One-way session**: Any one-way session with RFQ quotes, or create one with "I need a one-way flight from KTEB to KLAX on March 10"

### Pre-Test Setup

1. Ensure all dependencies are installed: `npm install`
2. Start the development server: `npm run dev`
3. Verify the CJTQML session has visible RFQ quote cards in both outbound and return sections

---

## Sign-Off

| Tester | Role | Result | Date | Signature |
|--------|------|--------|------|-----------|
| @AB | QA Lead | [ ] Pass [ ] Fail | ____-__-__ | _________ |
| @Kham | Developer | [ ] Pass [ ] Fail | ____-__-__ | _________ |

### Final Disposition

- [ ] All tests passed -- ready for production
- [ ] Issues found -- see notes above
- [ ] Blocked -- requires {description}

---

*Generated by `/uat_instructions ONEK-201` on 2026-02-08*
